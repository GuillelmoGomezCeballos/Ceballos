#include <TROOT.h>
#include <TFile.h>
#include <TSystem.h>
#include <iostream>
#include <fstream>
#include "TH1D.h"
void countEvents(){
  const int nCha = 222;
  TFile *_file[nCha];
  TString  myRootFile[nCha] = {
   "old/histo_s11-wjets-v11-pu_all_noskim.root",
   "old/histo_s11-ttj-v11-pu_all_noskim.root",
   "old/histo_s11-tt2l-powheg-v11-pu_all_noskim.root",
   "old/histo_s11-wtg-v11-pu_all_noskim.root",
   "old/histo_s11-wmg-v11-pu_all_noskim.root",
   "old/histo_s11-weg-v11-pu_all_noskim.root",
   "old/histo_s11-zttg-v11-pu_all_noskim.root",
   "old/histo_s11-zmmg-v11-pu_all_noskim.root",
   "old/histo_s11-zeeg-v11-pu_all_noskim.root",
   "old/histo_s11-wwp-v11-pu_all_noskim.root",
   "old/histo_s11-wwm-v11-pu_all_noskim.root",
   "old/histo_s11-ttwp-v11-pu_all_noskim.root",
   "old/histo_s11-ttwm-v11-pu_all_noskim.root",
   "old/histo_s11-ttz-v11-pu_all_noskim.root",
   "old/histo_s11-www2p-v11-pu_all_noskim.root",
   "old/histo_s11-www2m-v11-pu_all_noskim.root",
   "old/histo_s11-zz-v11-pu_all_noskim.root",
   "old/histo_s11-ww2l-v11-pu_all_noskim.root",
   "old/histo_s11-wz-v11-pu_all_noskim.root",
   "old/histo_s11-wz3l-v11-pu_all_noskim.root",
   "old/histo_s11-wz3l-mg-v11-pu_all_noskim.root",
   "old/histo_s11-wz2l2q-mg-v11-pu_all_noskim.root",
   "old/histo_s11-ww-mcatnlo-v11-pu_all_noskim.root",
   "old/histo_s11-wwup-mcatnlo-v11-pu_all_noskim.root",
   "old/histo_s11-wwdown-mcatnlo-v11-pu_all_noskim.root",
   "old/histo_s11-zz4l-mg-v11-pu_all_noskim.root",
   "old/histo_s11-zz2l2q-mg-v11-pu_all_noskim.root",
   "old/histo_s11-zz2l2n-mg-v11-pu_all_noskim.root",
   "old/histo_s11-zmmm1020-powheg-v11-pu_all_noskim.root",
   "old/histo_s11-zmmm20-powheg-v11-pu_all_noskim.root",
   "old/histo_s11-zeem1020-powheg-v11-pu_all_noskim.root",
   "old/histo_s11-zeem20-powheg-v11-pu_all_noskim.root",
   "old/histo_s11-zttm1020-v11-pu_all_noskim.root",
   "old/histo_s11-zttm20-powheg-v11-pu_all_noskim.root",
   "old/histo_p11-pj-v1g1-pu_all_noskim.root",
   "old/histo_s11-stop-powheg-v11-pu_all_noskim.root",
   "old/histo_s11-stopb-powheg-v11-pu_all_noskim.root",
   "old/histo_s11-ttop-powheg-v11-pu_all_noskim.root",
   "old/histo_s11-ttopb-powheg-v11-pu_all_noskim.root",
   "old/histo_s11-wtop-powheg-v11-pu_all_noskim.root",
   "old/histo_s11-wtopb-powheg-v11-pu_all_noskim.root",
   "old/histo_s11-wtop-ds-powheg-v11-pu_all_noskim.root",
   "old/histo_s11-wtopb-ds-powheg-v11-pu_all_noskim.root",
   "old/histo_s11-wwj-v11-pu_all_noskim.root",
   "old/histo_s11-ggww2l-v11-pu_all_noskim.root",
   "old/histo_s11-zmmm20-powheg-emb-tau121_all_noskim.root",
   "old/histo_s11-zmmm20-powheg-emb-tau122_all_noskim.root",
   "old/histo_s11-zmmm20-powheg-emb-tau123_all_noskim.root",
   "old/histo_s11-h120ww2l-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h120wwlt-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h120ww2t-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h120ww2l-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h120wwlt-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h120ww2t-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h130ww2l-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h130wwlt-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h130ww2t-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h130ww2l-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h130wwlt-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h130ww2t-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h140ww2l-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h140wwlt-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h140ww2t-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h140ww2l-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h140wwlt-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h140ww2t-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h150ww2l-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h150wwlt-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h150ww2t-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h150ww2l-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h150wwlt-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h150ww2t-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h160ww2l-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h160wwlt-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h160ww2t-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h160ww2l-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h160wwlt-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h160ww2t-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h170ww2l-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h170wwlt-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h170ww2t-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h170ww2l-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h170wwlt-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h170ww2t-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h180ww2l-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h180wwlt-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h180ww2t-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h180ww2l-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h180wwlt-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h180ww2t-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h190ww2l-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h190wwlt-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h190ww2t-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h190ww2l-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h190wwlt-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h190ww2t-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h200ww2l-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h200wwlt-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h200ww2t-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h200ww2l-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h200wwlt-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h200ww2t-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h250ww2l-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h250wwlt-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h250ww2t-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h250ww2l-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h250wwlt-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h250ww2t-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h300ww2l-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h300wwlt-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h300ww2t-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h300ww2l-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h300wwlt-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h300ww2t-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h350ww2l-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h350wwlt-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h350ww2t-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h350ww2l-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h350wwlt-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h350ww2t-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h400ww2l-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h400wwlt-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h400ww2t-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h400ww2l-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h400wwlt-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h400ww2t-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h450ww2l-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h450wwlt-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h450ww2t-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h450ww2l-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h450wwlt-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h450ww2t-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h500ww2l-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h500wwlt-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h500ww2t-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h500ww2l-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h500wwlt-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h500ww2t-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h550ww2l-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h550wwlt-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h550ww2t-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h550ww2l-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h550wwlt-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h550ww2t-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h600ww2l-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h600wwlt-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h600ww2t-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h600ww2l-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h600wwlt-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h600ww2t-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h120ww2l-vtth-v11-pu_all_noskim.root",
   "old/histo_s11-h130ww2l-vtth-v11-pu_all_noskim.root",
   "old/histo_s11-h140ww2l-vtth-v11-pu_all_noskim.root",
   "old/histo_s11-h150ww2l-vtth-v11-pu_all_noskim.root",
   "old/histo_s11-h160ww2l-vtth-v11-pu_all_noskim.root",
   "old/histo_s11-h170ww2l-vtth-v11-pu_all_noskim.root",
   "old/histo_s11-h180ww2l-vtth-v11-pu_all_noskim.root",
   "old/histo_s11-h190ww2l-vtth-v11-pu_all_noskim.root",
   "old/histo_s11-h200ww2l-vtth-v11-pu_all_noskim.root",
   "old/histo_s11-h250ww2l-vtth-v11-pu_all_noskim.root",
   "old/histo_s11-h300ww2l-vtth-v11-pu_all_noskim.root",
   "old/histo_s11-h350ww2l-vtth-v11-pu_all_noskim.root",
   "old/histo_s11-h400ww2l-vtth-v11-pu_all_noskim.root",
   "old/histo_s11-h450ww2l-vtth-v11-pu_all_noskim.root",
   "old/histo_s11-h500ww2l-vtth-v11-pu_all_noskim.root",
   "old/histo_s11-h550ww2l-vtth-v11-pu_all_noskim.root",
   "old/histo_s11-h600ww2l-vtth-v11-pu_all_noskim.root",
   "old/histo_s11-h115ww2l-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h115ww2l-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h110ww2l-gf-v11-pu_all_noskim.root",
   "old/histo_s11-h110ww2l-vbf-v11-pu_all_noskim.root",
   "old/histo_s11-h200zz2l-gf-v1g1-pu_all_noskim.root",
   "old/histo_s11-h250zz2l-gf-v1g1-pu_all_noskim.root",
   "old/histo_s11-h300zz2l-gf-v1g1-pu_all_noskim.root",
   "old/histo_s11-h400zz2l-gf-v1g1-pu_all_noskim.root",
   "old/histo_s11-h500zz2l-gf-v1g1-pu_all_noskim.root",
   "old/histo_s11-h200zz2l-vbf-v1g1-pu_all_noskim.root",
   "old/histo_s11-h250zz2l-vbf-v1g1-pu_all_noskim.root",
   "old/histo_s11-h300zz2l-vbf-v1g1-pu_all_noskim.root",
   "old/histo_s11-h400zz2l-vbf-v1g1-pu_all_noskim.root",
   "old/histo_s11-h500zz2l-vbf-v1g1-pu_all_noskim.root",
   "old/histo_s11-h130zz4l-gf-v1g1-pu_all_noskim.root",
   "old/histo_s11-h150zz4l-gf-v1g1-pu_all_noskim.root",
   "old/histo_s11-h200zz4l-gf-v1g1-pu_all_noskim.root",
   "old/histo_s11-h400zz4l-gf-v1g1-pu_all_noskim.root",
   "old/histo_r11a-mueg-m10-v1_all_noskim.root",
   "old/histo_r11a-dmu-m10-v1_all_noskim.root",
   "old/histo_r11a-smu-m10-v1_all_noskim.root",
   "old/histo_r11a-del-m10-v1_all_noskim.root",
   "old/histo_r11a-sel-m10-v1_all_noskim.root",
   "old/histo_r11a-mueg-pr-v4_all_noskim.root",
   "old/histo_r11a-dmu-pr-v4_all_noskim.root",
   "old/histo_r11a-smu-pr-v4_all_noskim.root",
   "old/histo_r11a-del-pr-v4_all_noskim.root",
   "old/histo_r11a-sel-pr-v4_all_noskim.root",
   "old/histo_r11a-mueg-a05-v1_all_noskim.root",
   "old/histo_r11a-dmu-a05-v1_all_noskim.root",
   "old/histo_r11a-smu-a05-v1_all_noskim.root",
   "old/histo_r11a-del-a05-v1_all_noskim.root",
   "old/histo_r11a-sel-a05-v1_all_noskim.root",
   "old/histo_r11a-mueg-pr-v6_all_noskim.root",
   "old/histo_r11a-dmu-pr-v6_all_noskim.root",
   "old/histo_r11a-smu-pr-v6_all_noskim.root",
   "old/histo_r11a-del-pr-v6_all_noskim.root",
   "old/histo_r11a-sel-pr-v6_all_noskim.root",
   "old/histo_r11b-mueg-pr-v1_all_noskim.root",
   "old/histo_r11b-dmu-pr-v1_all_noskim.root",
   "old/histo_r11b-smu-pr-v1_all_noskim.root",
   "old/histo_r11b-del-pr-v1_all_noskim.root",
   "old/histo_r11b-sel-pr-v1_all_noskim.root",
   "old/histo_r11a-smu-m10-v1-emb-tau121_all_noskim.root",
   "old/histo_r11a-smu-m10-v1-emb-tau122_all_noskim.root",
   "old/histo_r11a-smu-m10-v1-emb-tau123_all_noskim.root",
   "old/histo_r11a-smu-pr-v4-emb-tau121_all_noskim.root",
   "old/histo_r11a-smu-pr-v4-emb-tau122_all_noskim.root",
   "old/histo_r11a-smu-pr-v4-emb-tau123_all_noskim.root",
   "old/histo_r11a-smu-a05-v1-emb-tau121_all_noskim.root",
   "old/histo_r11a-smu-a05-v1-emb-tau122_all_noskim.root",
   "old/histo_r11a-smu-a05-v1-emb-tau123_all_noskim.root",
   "old/histo_r11a-smu-pr-v6-emb-tau121_all_noskim.root",
   "old/histo_r11a-smu-pr-v6-emb-tau122_all_noskim.root",
   "old/histo_r11a-smu-pr-v6-emb-tau123_all_noskim.root"
 };
  for(int i=0; i<nCha; i++){
    TString RootFile = myRootFile[i];
    TString theExec = "ls " + RootFile + " >& /dev/null";
    if(gSystem->Exec(theExec)) continue;
    _file[i] = TFile::Open(RootFile);
    _file[i]->cd();

    TH1D* Histo[6];
    Histo[0] = (TH1D*) gROOT->FindObject("hDAllEvents");
    Histo[1] = (TH1D*) gROOT->FindObject("hDGenWBF_0");
    Histo[2] = (TH1D*) gROOT->FindObject("hFlavorClassification");
    Histo[3] = (TH1D*) gROOT->FindObject("hDBeforeHLTSel_0");
    Histo[4] = (TH1D*) gROOT->FindObject("hDwwPresel_0");
    Histo[5] = (TH1D*) gROOT->FindObject("hDHKFactor_0");

    printf("%s: %10.1f",RootFile.Data(),Histo[0]->GetSumOfWeights());
    double nwbf = Histo[1]->GetSumOfWeights();
    double nnowbf = Histo[0]->GetSumOfWeights() - nwbf;
    if(nwbf > 0){
      printf(" | N(wbf) = %10.1f",nwbf);
      printf(" | N(no wbf) = %10.1f",nnowbf);
      if(nnowbf - Histo[5]->GetSumOfWeights() !=0){
        printf(" ---> N(wbf) + N(no wbf) != Ntot!");
      }
    }
    printf(" | (ISR)==> %10.1f",Histo[2]->GetSumOfWeights());
    printf(" | (Flavor)==> %10.1f",Histo[3]->GetSumOfWeights());
    printf(" | (HLT)==> %10.1f",Histo[4]->GetSumOfWeights());
    printf(" | (Weight)==> %10.1f",Histo[5]->GetSumOfWeights());
    printf("\n");
  }
  for(int i=0; i<nCha; i++){
    TString RootFile = myRootFile[i] + "_all_noskim.root";
    TString theExec = "ls " + RootFile + " >& /dev/null";
    if(gSystem->Exec(theExec)) continue;
    _file[i]->Close();
  }
}
